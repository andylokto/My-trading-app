<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MIM DRIVE Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #f1f5f9; font-family: -apple-system, sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-btn.active { color: #3b82f6; border-bottom: 2px solid #3b82f6; }
        .drive-checkbox:checked + label { background-color: #3b82f6; border-color: #3b82f6; color: white; }
    </style>
</head>
<body class="pb-24"> <div class="max-w-2xl mx-auto p-4 md:p-8">
        
        <div id="page-analyze" class="tab-content active">
            <h2 class="text-xl font-black mb-6 italic text-blue-500 uppercase tracking-widest">Step 1: å½¢æ…‹è¨ºæ–·</h2>
            <section class="bg-slate-800/50 p-6 rounded-3xl border border-slate-700 mb-6">
                <p class="text-[10px] font-bold text-gray-400 mb-4 uppercase tracking-widest">VCP æ³¢å‹•æ”¶ç¸®æª¢æŸ¥ (%)</p>
                <div class="grid grid-cols-3 gap-4 mb-4">
                    <input type="number" id="vcp1" placeholder="1st" oninput="checkVCP()" class="bg-slate-900 p-4 rounded-2xl border border-slate-700 text-center font-bold">
                    <input type="number" id="vcp2" placeholder="2nd" oninput="checkVCP()" class="bg-slate-900 p-4 rounded-2xl border border-slate-700 text-center font-bold">
                    <input type="number" id="vcp3" placeholder="3rd" oninput="checkVCP()" class="bg-slate-900 p-4 rounded-2xl border border-slate-700 text-center font-bold">
                </div>
                <div id="vcpStatus" class="text-xs text-center py-2 rounded-xl bg-slate-900 text-gray-500 italic">ç­‰å¾…è¼¸å…¥æ•¸æ“š...</div>
            </section>
            <section class="bg-slate-800/50 p-6 rounded-3xl border border-slate-700">
                <p class="text-[10px] font-bold text-gray-400 mb-4 uppercase tracking-widest">DRIVE é¸è‚¡æº–å‰‡</p>
                <div class="grid grid-cols-5 gap-2">
                    <input type="checkbox" id="d" class="drive-checkbox hidden"><label for="d" class="block text-center p-3 rounded-xl border border-slate-600 text-xs">D</label>
                    <input type="checkbox" id="r" class="drive-checkbox hidden"><label for="r" class="block text-center p-3 rounded-xl border border-slate-600 text-xs">R</label>
                    <input type="checkbox" id="i" class="drive-checkbox hidden"><label for="i" class="block text-center p-3 rounded-xl border border-slate-600 text-xs">I</label>
                    <input type="checkbox" id="v" class="drive-checkbox hidden"><label for="v" class="block text-center p-3 rounded-xl border border-slate-600 text-xs">V</label>
                    <input type="checkbox" id="e" class="drive-checkbox hidden"><label for="e" class="block text-center p-3 rounded-xl border border-slate-600 text-xs">E</label>
                </div>
            </section>
        </div>

        <div id="page-trade" class="tab-content">
            <h2 class="text-xl font-black mb-6 italic text-blue-500 uppercase tracking-widest">Step 2: å€‰ä½èˆ‡é¢¨éšª</h2>
            <div class="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl space-y-4">
                <input type="text" id="symbol" placeholder="è‚¡ç¥¨ä»£ç¢¼" class="w-full bg-slate-800 p-4 rounded-2xl border border-slate-700 font-black text-xl uppercase text-blue-400">
                <div class="grid grid-cols-2 gap-4">
                    <input type="number" id="entry" placeholder="è²·å…¥åƒ¹" oninput="calculate()" class="bg-slate-800 p-4 rounded-2xl border border-slate-700 font-bold">
                    <input type="number" id="sl" placeholder="æ­¢æåƒ¹" oninput="calculate()" class="bg-slate-800 p-4 rounded-2xl border border-slate-700 font-bold text-red-400">
                </div>
                <div class="bg-blue-600/10 p-6 rounded-3xl border border-blue-500/20 text-center">
                    <p id="qty" class="text-5xl font-black mb-1">0</p>
                    <p class="text-[10px] text-blue-400 font-bold uppercase tracking-widest">å»ºè­°è²·å…¥è‚¡æ•¸</p>
                </div>
                <button onclick="saveTrade()" class="w-full bg-blue-600 py-5 rounded-2xl font-black text-xl shadow-lg">å„²å­˜ä¸¦å®Œæˆ</button>
            </div>
        </div>

        <div id="page-journal" class="tab-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-black italic text-blue-500 uppercase tracking-widest">äº¤æ˜“æ—¥èªŒ</h2>
                <button onclick="exportToCSV()" class="text-[10px] bg-slate-800 px-3 py-1 rounded-full border border-slate-600">CSV åŒ¯å‡º</button>
            </div>
            <div id="logs" class="space-y-4"></div>
        </div>

    </div>

    <nav class="fixed bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-800 px-6 py-4 flex justify-around items-center shadow-2xl z-50">
        <button onclick="switchPage('analyze')" class="nav-btn active flex flex-col items-center gap-1">
            <span class="text-xl">ğŸ”</span><span class="text-[10px] font-bold uppercase">åˆ†æ</span>
        </button>
        <button onclick="switchPage('trade')" class="nav-btn flex flex-col items-center gap-1">
            <span class="text-xl">ğŸ’°</span><span class="text-[10px] font-bold uppercase">äº¤æ˜“</span>
        </button>
        <button onclick="switchPage('journal')" class="nav-btn flex flex-col items-center gap-1">
            <span class="text-xl">ğŸ“–</span><span class="text-[10px] font-bold uppercase">æ—¥èªŒ</span>
        </button>
    </nav>

    <script>
        // åˆ†é åˆ‡æ›é‚è¼¯
        function switchPage(pageId) {
            document.querySelectorAll('.tab-content').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`page-${pageId}`).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // VCP é‚è¼¯
        function checkVCP() {
            const v1 = parseFloat(document.getElementById('vcp1').value) || 0;
            const v2 = parseFloat(document.getElementById('vcp2').value) || 0;
            const v3 = parseFloat(document.getElementById('vcp3').value) || 0;
            const status = document.getElementById('vcpStatus');
            if (v1 && v2 && v2 < v1) {
                status.innerText = "âœ“ æ³¢å‹•æ”¶ç¸®ä¸­";
                status.className = "text-xs text-center py-2 rounded-xl bg-green-500/20 text-green-400 italic";
                document.getElementById('v').checked = true;
            } else {
                status.innerText = "ç­‰å¾…ç¬¦åˆæ”¶ç¸®æº–å‰‡...";
                status.className = "text-xs text-center py-2 rounded-xl bg-slate-900 text-gray-500 italic";
                document.getElementById('v').checked = false;
            }
        }

        // è¨ˆç®—é‚è¼¯ (ç°¡åŒ–ç¤ºä¾‹)
        function calculate() {
            const entry = parseFloat(document.getElementById('entry').value) || 0;
            const sl = parseFloat(document.getElementById('sl').value) || 0;
            if (entry && sl) {
                const qty = Math.floor(100 / Math.abs(entry - sl)); // å‡è¨­é¢¨éšª 100
                document.getElementById('qty').innerText = qty;
            }
        }

        // å„²å­˜é‚è¼¯ (ç•¥)
        function saveTrade() {
            alert("äº¤æ˜“å·²è¨˜éŒ„è‡³æ—¥èªŒï¼");
            switchPage('journal');
            // ... åŒå‰è¿°å„²å­˜é‚è¼¯ ...
        }
    </script>
</body>
</html>
